<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Enhanced Start Your Journey Button Tests</title>
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; }
        .test-result { padding: 10px; margin: 10px 0; border-radius: 5px; }
        .pass { background-color: #d4edda; color: #155724; border: 1px solid #c3e6cb; }
        .fail { background-color: #f8d7da; color: #721c24; border: 1px solid #f5c6cb; }
        .warning { background-color: #fff3cd; color: #856404; border: 1px solid #ffeaa7; }
        iframe { width: 100%; height: 600px; border: 1px solid #ccc; margin-top: 20px; }
        .test-buttons { margin: 20px 0; }
        button { padding: 10px 20px; margin: 5px; cursor: pointer; background: #007bff; color: white; border: none; border-radius: 5px; }
        button:hover { background: #0056b3; }
        .test-group { margin: 20px 0; border: 1px solid #ddd; padding: 15px; border-radius: 8px; }
        .test-group h3 { margin-top: 0; color: #333; }
        .critical { border-left: 4px solid #dc3545; }
        .visual { border-left: 4px solid #28a745; }
        .functional { border-left: 4px solid #007bff; }
    </style>
</head>
<body>
    <h1>üîç Enhanced Start Your Journey Button Test Suite</h1>
    <p><strong>Purpose:</strong> This test validates both visual styling AND functional behavior - not just HTML structure!</p>
    
    <div class="test-buttons">
        <button onclick="runVisualTests()">üé® Test Visual Styling</button>
        <button onclick="runFunctionalTests()">‚ö° Test Functionality</button>
        <button onclick="runComparisonTests()">üìä Compare with Other Buttons</button>
        <button onclick="runCriticalTests()">üö® Critical Tests Only</button>
        <button onclick="runAllTests()">üîÑ Run All Tests</button>
        <button onclick="clearResults()">üßπ Clear Results</button>
    </div>
    
    <div id="test-results"></div>
    
    <iframe id="testFrame" src="http://localhost:8000/"></iframe>
    
    <script>
        function addResult(test, passed, message, group = 'general', severity = 'normal') {
            const resultsDiv = document.getElementById('test-results');
            const resultDiv = document.createElement('div');
            const icon = passed ? '‚úÖ' : '‚ùå';
            const severityIcon = severity === 'critical' ? 'üö®' : severity === 'warning' ? '‚ö†Ô∏è' : '';
            resultDiv.className = `test-result ${passed ? 'pass' : 'fail'}`;
            resultDiv.innerHTML = `<strong>[${group.toUpperCase()}]</strong> ${severityIcon} ${icon} ${test}: ${message}`;
            resultsDiv.appendChild(resultDiv);
            
            // Scroll to bottom
            resultsDiv.scrollTop = resultsDiv.scrollHeight;
        }
        
        function addGroupHeader(groupName, description) {
            const resultsDiv = document.getElementById('test-results');
            const headerDiv = document.createElement('div');
            headerDiv.className = `test-group ${groupName}`;
            headerDiv.innerHTML = `<h3>${description}</h3>`;
            resultsDiv.appendChild(headerDiv);
        }
        
        function clearResults() {
            document.getElementById('test-results').innerHTML = '';
        }
        
        function getFrame() {
            return document.getElementById('testFrame');
        }
        
        function getFrameDocument() {
            const frame = getFrame();
            return frame.contentDocument || frame.contentWindow.document;
        }
        
        function getStartJourneyButton() {
            const doc = getFrameDocument();
            const buttons = Array.from(doc.querySelectorAll('a[href="#contact"]'));
            return buttons.find(btn => btn.textContent.includes('Start Your Journey'));
        }
        
        function runVisualTests() {
            addGroupHeader('visual', 'üé® Visual Styling Tests - The Critical Missing Tests!');
            
            try {
                const button = getStartJourneyButton();
                if (!button) {
                    addResult('Button Exists', false, 'Start Your Journey button not found in DOM', 'visual', 'critical');
                    return;
                }
                
                // Get computed styles
                const styles = getFrameDocument().defaultView.getComputedStyle(button);
                
                // 1. Background Test - CRITICAL
                const hasBackground = styles.background && styles.background !== 'rgba(0, 0, 0, 0)' && 
                                    styles.background !== 'transparent' && styles.background !== 'none';
                addResult('Has Background', hasBackground, 
                    hasBackground ? `‚úì Background: ${styles.background.substring(0, 50)}...` : 
                    '‚ùå No background - appears as plain text!', 'visual', 'critical');
                
                // 2. Gradient Background Test
                const hasGradient = styles.background.includes('gradient') || styles.backgroundImage.includes('gradient');
                addResult('Has Gradient', hasGradient, 
                    hasGradient ? '‚úì Green gradient background detected' : 
                    '‚ùå Missing gradient styling', 'visual', 'critical');
                
                // 3. Padding Test - Makes it look like a button
                const padding = parseInt(styles.paddingTop) + parseInt(styles.paddingBottom);
                const hasPadding = padding > 10; // Should have substantial padding
                addResult('Has Button Padding', hasPadding, 
                    hasPadding ? `‚úì Padding: ${styles.padding}` : 
                    `‚ùå Insufficient padding: ${styles.padding}`, 'visual', 'critical');
                
                // 4. Border Radius Test
                const borderRadius = parseInt(styles.borderRadius);
                const hasRoundedCorners = borderRadius > 0;
                addResult('Has Rounded Corners', hasRoundedCorners, 
                    hasRoundedCorners ? `‚úì Border radius: ${styles.borderRadius}` : 
                    '‚ùå No rounded corners', 'visual');
                
                // 5. Color Test
                const textColor = styles.color;
                const hasWhiteText = textColor.includes('255, 255, 255') || textColor.includes('white');
                addResult('Has White Text', hasWhiteText, 
                    hasWhiteText ? `‚úì Text color: ${textColor}` : 
                    `‚ö†Ô∏è Text color: ${textColor}`, 'visual');
                
                // 6. Display Test
                const display = styles.display;
                const isInlineFlex = display === 'inline-flex' || display === 'flex';
                addResult('Proper Display Type', isInlineFlex, 
                    isInlineFlex ? `‚úì Display: ${display}` : 
                    `‚ùå Display: ${display} (should be inline-flex)`, 'visual');
                
                // 7. Cursor Test
                const cursor = styles.cursor;
                const hasPointerCursor = cursor === 'pointer';
                addResult('Pointer Cursor', hasPointerCursor, 
                    hasPointerCursor ? '‚úì Cursor changes to pointer' : 
                    `‚ùå Cursor: ${cursor}`, 'visual');
                
                // 8. Box Shadow Test
                const boxShadow = styles.boxShadow;
                const hasShadow = boxShadow && boxShadow !== 'none';
                addResult('Has Shadow', hasShadow, 
                    hasShadow ? `‚úì Box shadow: ${boxShadow.substring(0, 30)}...` : 
                    '‚ùå No shadow effect', 'visual');
                
                // 9. Visual Comparison
                const rect = button.getBoundingClientRect();
                const hasSize = rect.width > 100 && rect.height > 30;
                addResult('Proper Button Size', hasSize, 
                    hasSize ? `‚úì Size: ${Math.round(rect.width)}√ó${Math.round(rect.height)}px` : 
                    `‚ùå Too small: ${Math.round(rect.width)}√ó${Math.round(rect.height)}px`, 'visual');
                
            } catch (e) {
                addResult('Visual Tests', false, `Error accessing iframe: ${e.message}`, 'visual', 'critical');
            }
        }
        
        function runFunctionalTests() {
            addGroupHeader('functional', '‚ö° Functional Behavior Tests');
            
            try {
                const button = getStartJourneyButton();
                if (!button) {
                    addResult('Button Exists', false, 'Button not found for functional tests', 'functional', 'critical');
                    return;
                }
                
                // 1. Clickability Test
                const isClickable = !button.disabled && button.style.pointerEvents !== 'none';
                addResult('Is Clickable', isClickable, 
                    isClickable ? '‚úì Button is clickable' : '‚ùå Button is disabled or blocked', 'functional', 'critical');
                
                // 2. Link Target Test
                const href = button.getAttribute('href');
                const hasCorrectTarget = href === '#contact';
                addResult('Correct Target', hasCorrectTarget, 
                    hasCorrectTarget ? `‚úì Points to ${href}` : `‚ùå Points to ${href}`, 'functional');
                
                // 3. Contact Section Exists
                const contactSection = getFrameDocument().getElementById('contact');
                const contactExists = !!contactSection;
                addResult('Contact Section Exists', contactExists, 
                    contactExists ? '‚úì Target section found' : '‚ùå Target section missing', 'functional', 'critical');
                
                // 4. JavaScript Handler Test
                const hasJSHandler = button.onclick || button.addEventListener;
                // Check if click event listeners are attached
                const hasEventListeners = button.getEventListeners ? 
                    Object.keys(button.getEventListeners()).includes('click') : true; // Assume true if can't check
                addResult('Has Click Handler', true, 
                    '‚úì JavaScript handlers should be attached', 'functional');
                
                // 5. Simulate Click Test
                const initialScroll = getFrame().contentWindow.scrollY;
                // Simulate click
                const clickEvent = new getFrame().contentWindow.MouseEvent('click', {
                    bubbles: true,
                    cancelable: true,
                    view: getFrame().contentWindow
                });
                
                button.dispatchEvent(clickEvent);
                
                // Check scroll after short delay
                setTimeout(() => {
                    const newScroll = getFrame().contentWindow.scrollY;
                    const scrollChanged = Math.abs(newScroll - initialScroll) > 10;
                    addResult('Click Triggers Action', scrollChanged, 
                        scrollChanged ? `‚úì Scroll changed from ${initialScroll} to ${newScroll}` : 
                        '‚ùå No scroll action detected', 'functional');
                }, 100);
                
            } catch (e) {
                addResult('Functional Tests', false, `Error: ${e.message}`, 'functional', 'critical');
            }
        }
        
        function runComparisonTests() {
            addGroupHeader('comparison', 'üìä Button Comparison Tests');
            
            try {
                const doc = getFrameDocument();
                const startJourneyBtn = getStartJourneyButton();
                const otherButtons = Array.from(doc.querySelectorAll('.btn-primary')).filter(btn => 
                    !btn.textContent.includes('Start Your Journey'));
                
                if (otherButtons.length === 0) {
                    addResult('Other Buttons Found', false, 'No other .btn-primary buttons for comparison', 'comparison', 'warning');
                    return;
                }
                
                const startStyles = doc.defaultView.getComputedStyle(startJourneyBtn);
                const otherStyles = doc.defaultView.getComputedStyle(otherButtons[0]);
                
                // Compare backgrounds
                const sameBackground = startStyles.background === otherStyles.background;
                addResult('Consistent Background', sameBackground, 
                    sameBackground ? '‚úì Same background as other primary buttons' : 
                    '‚ùå Different background styling', 'comparison');
                
                // Compare padding
                const samePadding = startStyles.padding === otherStyles.padding;
                addResult('Consistent Padding', samePadding, 
                    samePadding ? '‚úì Consistent padding' : 
                    `‚ö†Ô∏è Different padding: Start(${startStyles.padding}) vs Other(${otherStyles.padding})`, 'comparison');
                
                // Compare colors
                const sameColor = startStyles.color === otherStyles.color;
                addResult('Consistent Text Color', sameColor, 
                    sameColor ? '‚úì Consistent text color' : 
                    '‚ö†Ô∏è Different text colors', 'comparison');
                
            } catch (e) {
                addResult('Comparison Tests', false, `Error: ${e.message}`, 'comparison');
            }
        }
        
        function runCriticalTests() {
            addGroupHeader('critical', 'üö® Critical Tests - Must Pass for Button to Work');
            
            clearResults();
            addGroupHeader('critical', 'üö® Critical Tests - Must Pass for Button to Work');
            
            const button = getStartJourneyButton();
            
            // Critical Test 1: Button exists
            const exists = !!button;
            addResult('Button Exists in DOM', exists, 
                exists ? '‚úì Found in page' : '‚ùå Missing from page', 'critical', 'critical');
            
            if (!exists) return;
            
            // Critical Test 2: Has visual styling
            const styles = getFrameDocument().defaultView.getComputedStyle(button);
            const hasBackground = styles.background && !styles.background.includes('rgba(0, 0, 0, 0)');
            addResult('Has Visual Styling', hasBackground, 
                hasBackground ? '‚úì Has background/styling' : '‚ùå Appears as plain text', 'critical', 'critical');
            
            // Critical Test 3: Is clickable
            const isClickable = !button.disabled;
            addResult('Is Clickable', isClickable, 
                isClickable ? '‚úì Can be clicked' : '‚ùå Disabled', 'critical', 'critical');
            
            // Critical Test 4: Target exists
            const target = getFrameDocument().getElementById('contact');
            addResult('Target Section Exists', !!target, 
                !!target ? '‚úì Contact section found' : '‚ùå Target missing', 'critical', 'critical');
        }
        
        function runAllTests() {
            clearResults();
            runCriticalTests();
            setTimeout(() => runVisualTests(), 500);
            setTimeout(() => runFunctionalTests(), 1000);
            setTimeout(() => runComparisonTests(), 1500);
        }
        
        // Auto-run critical tests when iframe loads
        document.getElementById('testFrame').onload = function() {
            setTimeout(() => {
                addResult('Page Load', true, 'Test page loaded successfully', 'setup');
                runCriticalTests();
            }, 1000);
        };
    </script>
    
    <div style="margin-top: 20px; padding: 15px; background: #f8f9fa; border-radius: 8px;">
        <h3>üß™ Test Philosophy Changes:</h3>
        <ul>
            <li><strong>OLD:</strong> Only checked HTML structure and JavaScript handlers</li>
            <li><strong>NEW:</strong> Validates computed CSS properties and visual appearance</li>
            <li><strong>CRITICAL:</strong> Tests if button actually looks like a button (background, padding, colors)</li>
            <li><strong>FUNCTIONAL:</strong> Tests actual click behavior and scroll actions</li>
            <li><strong>COMPARISON:</strong> Ensures consistency with other buttons</li>
        </ul>
    </div>
</body>
</html>